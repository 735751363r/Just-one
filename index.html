<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Just One - Spiellobby</title>
    <!-- Qrious-Bibliothek zur QR-Code-Generierung -->
    <script src="https://cdn.jsdelivr.net/npm/qrious@4.0.2/qrious.min.js"></script>
</head>
<body>
    <h1>Just One - Spiellobby</h1>

    <!-- Anzeige des Spielcodes -->
    <p>Dein Spielcode: <strong id="game-code-display">Noch kein Code</strong></p>

    <!-- QR-Code Container -->
    <canvas id="qr-code" style="border: 1px solid #ccc;"></canvas>
    <br>

    <!-- Button zur Code-Generierung -->
    <button onclick="startGame()">Neues Spiel starten</button>

    <!-- Spieler-Eingabe für den Beitritt -->
    <h2>Dem Spiel beitreten</h2>
    <input type="text" id="player-code-input" placeholder="Spielcode eingeben">
    <button onclick="joinGame()">Beitreten</button>
    <p id="join-message"></p>

    <!-- JavaScript -->
    <script>
        let gameCode = ""; // Hier speichern wir den Spielcode

        // Spielcode generieren
        function generateGameCode() {
            const characters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
            let code = "";
            for (let i = 0; i < 6; i++) {
                code += characters.charAt(Math.floor(Math.random() * characters.length));
            }
            return code;
        }

        // Spiel starten und QR-Code anzeigen
        function startGame() {
            // Spielcode generieren
            gameCode = generateGameCode();
            document.getElementById("game-code-display").textContent = gameCode;

            // QR-Code erstellen mit Qrious
            const qr = new QRious({
                element: document.getElementById("qr-code"),
                value: gameCode, // Inhalt des QR-Codes
                size: 200        // Größe des QR-Codes
            });
        }

        // Spieler tritt dem Spiel bei
        function joinGame() {
            const playerInput = document.getElementById("player-code-input").value.trim();
            const message = document.getElementById("join-message");

            if (playerInput === gameCode
